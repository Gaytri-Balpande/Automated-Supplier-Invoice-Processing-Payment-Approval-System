<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice Automation System - Professional Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }
        
        .glass-effect {
            backdrop-filter: blur(16px);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .slide-in {
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateX(-20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .success-bounce {
            animation: successBounce 0.6s ease-out;
        }
        
        @keyframes successBounce {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .loading-spinner {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid #ffffff;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .progress-bar {
            transition: width 0.3s ease-in-out;
        }
        
        .notification-enter {
            animation: notificationSlide 0.4s ease-out;
        }
        
        @keyframes notificationSlide {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .status-badge {
            position: relative;
            overflow: hidden;
        }
        
        .status-badge::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
    </style>
</head>
<body class="min-h-screen text-white">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Mock Database and Constants
        const VENDORS = [
            { id: 1, name: 'ABC Pvt Ltd', email: 'finance@abc.com' },
            { id: 2, name: 'XYZ Services', email: 'billing@xyz.com' },
            { id: 3, name: 'Tech Innovations Inc.', email: 'accounts@techinnovations.com' }
        ];

        const PURCHASE_ORDERS = {
            'PO-56789': { vendor: 'ABC Pvt Ltd', amount: 2500, items: 'Software Licenses' },
            'PO-67890': { vendor: 'XYZ Services', amount: 1200, items: 'Consulting Services' },
            'PO-78901': { vendor: 'Tech Innovations Inc.', amount: 3500, items: 'Hardware Equipment' }
        };

        // Utility Functions
        const generateId = () => Math.random().toString(36).substr(2, 9);
        const formatCurrency = (amount) => new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(amount);
        const formatDate = (date) => new Date(date).toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });

        // Storage Functions
        const loadInvoices = () => JSON.parse(localStorage.getItem('invoices') || '[]');
        const saveInvoices = (invoices) => localStorage.setItem('invoices', JSON.stringify(invoices));

        // Components
        function Header({ stats }) {
            return (
                <header className="text-center mb-8 fade-in">
                    <div className="glass-effect rounded-2xl p-8 mb-6">
                        <h1 className="text-5xl font-bold mb-4 bg-gradient-to-r from-white to-purple-200 bg-clip-text text-transparent">
                            Invoice Automation System
                        </h1>
                        <p className="text-xl opacity-90 mb-6">
                            AI-Powered Invoice Processing & Payment Approval Workflow
                        </p>
                        
                        {/* Hero Image */}
                        <div className="relative mb-6">
                            <img 
                                src="header.png" 
                                alt="Modern digital invoice processing dashboard showing automated workflow with AI-powered OCR scanning, real-time validation checks, approval notifications, and payment processing in a sleek blue-purple gradient interface"
                                className="mx-auto rounded-xl shadow-2xl w-full max-w-4xl w-36 h-42"
                            />
                            <div className="absolute inset-0 bg-gradient-to-t from-purple-900/20 to-transparent rounded-xl"></div>
                        </div>

                        {/* Stats Dashboard */}
                        <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mt-6">
                            <div className="glass-effect rounded-lg p-4">
                                <div className="text-2xl font-bold text-green-300">{stats.processed}</div>
                                <div className="text-sm opacity-75">Processed</div>
                            </div>
                            <div className="glass-effect rounded-lg p-4">
                                <div className="text-2xl font-bold text-yellow-300">{stats.pending}</div>
                                <div className="text-sm opacity-75">Pending</div>
                            </div>
                            <div className="glass-effect rounded-lg p-4">
                                <div className="text-2xl font-bold text-blue-300">{stats.approved}</div>
                                <div className="text-sm opacity-75">Approved</div>
                            </div>
                            <div className="glass-effect rounded-lg p-4">
                                <div className="text-2xl font-bold text-purple-300">{formatCurrency(stats.totalValue)}</div>
                                <div className="text-sm opacity-75">Total Value</div>
                            </div>
                        </div>
                    </div>
                </header>
            );
        }

        function NavigationTabs({ activeTab, setActiveTab, completedSteps }) {
            const tabs = [
                { id: 'upload', label: 'Invoice Upload', icon: 'üìÑ' },
                { id: 'validation', label: 'Validation', icon: '‚úÖ' },
                { id: 'approval', label: 'Approval', icon: 'üë®‚Äçüíº' },
                { id: 'dashboard', label: 'Dashboard', icon: 'üìä' }
            ];

            return (
                <nav className="flex justify-center mb-8">
                    <div className="glass-effect rounded-full p-2 flex space-x-2">
                        {tabs.map((tab) => (
                            <button
                                key={tab.id}
                                onClick={() => setActiveTab(tab.id)}
                                className={`px-6 py-3 rounded-full font-semibold transition-all duration-300 flex items-center space-x-2 ${
                                    activeTab === tab.id
                                        ? 'bg-white text-purple-600 shadow-lg transform scale-105'
                                        : 'text-white hover:bg-white/10'
                                } ${completedSteps.includes(tab.id) ? 'border-2 border-green-400' : ''}`}
                            >
                                <span>{tab.icon}</span>
                                <span>{tab.label}</span>
                                {completedSteps.includes(tab.id) && (
                                    <span className="ml-2 text-green-500">‚úì</span>
                                )}
                            </button>
                        ))}
                    </div>
                </nav>
            );
        }

        function InvoiceUploadForm({ onSubmit, isProcessing, completedSteps }) {
            const [formData, setFormData] = useState({
                invoiceNumber: 'INV-' + Math.random().toString().substr(2, 5),
                vendor: 'ABC Pvt Ltd',
                poNumber: 'PO-56789',
                amount: 2500,
                dueDate: '2025-12-31'
            });

            const [dragOver, setDragOver] = useState(false);
            const [uploadProgress, setUploadProgress] = useState(0);

            const handleSubmit = async (e) => {
                e.preventDefault();
                
                // Simulate upload progress
                setUploadProgress(0);
                const interval = setInterval(() => {
                    setUploadProgress(prev => {
                        if (prev >= 100) {
                            clearInterval(interval);
                            return 100;
                        }
                        return prev + 10;
                    });
                }, 100);

                await new Promise(resolve => setTimeout(resolve, 1200));
                onSubmit(formData);
            };

            const handleChange = (e) => {
                const { name, value } = e.target;
                setFormData(prev => ({
                    ...prev,
                    [name]: name === 'amount' ? parseFloat(value) : value
                }));
            };

            return (
                <div className="glass-effect rounded-2xl p-8 shadow-2xl slide-in">
                    <div className="flex items-center justify-between mb-6">
                        <h2 className="text-3xl font-bold">üìÑ Invoice Capture</h2>
                        {completedSteps.includes('upload') && (
                            <div className="success-bounce bg-green-500 rounded-full p-2">
                                <span className="text-white font-bold">‚úì</span>
                            </div>
                        )}
                    </div>

                    {/* File Drop Area */}
                    <div 
                        className={`border-2 border-dashed rounded-xl p-8 text-center mb-6 transition-all duration-300 ${
                            dragOver ? 'border-purple-400 bg-purple-400/10' : 'border-white/30 hover:border-white/50'
                        }`}
                        onDragOver={(e) => { e.preventDefault(); setDragOver(true); }}
                        onDragLeave={() => setDragOver(false)}
                        onDrop={(e) => { e.preventDefault(); setDragOver(false); }}
                    >
                        <img 
                            src="file_upload.png" 
                            alt="Invoice document upload interface with drag and drop functionality showing a stylized document icon with upload arrow in a modern flat design"
                            className="mx-auto mb-4 rounded-lg opacity-75 w-16"
                        />
                        <p className="text-lg mb-2">Drop PDF files here or click to browse</p>
                        <p className="text-sm opacity-75">Supports PDF, JPG, PNG formats</p>
                    </div>

                    {/* OCR Extracted Data Form */}
                    <form onSubmit={handleSubmit} className="space-y-6">
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label className="block text-sm font-medium mb-2">Invoice Number</label>
                                <input
                                    type="text"
                                    name="invoiceNumber"
                                    value={formData.invoiceNumber}
                                    onChange={handleChange}
                                    className="w-full px-4 py-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent transition-all"
                                    required
                                />
                            </div>
                            <div>
                                <label className="block text-sm font-medium mb-2">Vendor</label>
                                <select
                                    name="vendor"
                                    value={formData.vendor}
                                    onChange={handleChange}
                                    className="w-full px-4 py-3 rounded-lg bg-white/10 border border-white/20 text-white focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent transition-all"
                                    required
                                >
                                    {VENDORS.map(vendor => (
                                        <option key={vendor.id} value={vendor.name} className="text-gray-800">
                                            {vendor.name}
                                        </option>
                                    ))}
                                </select>
                            </div>
                            <div>
                                <label className="block text-sm font-medium mb-2">PO Number</label>
                                <select
                                    name="poNumber"
                                    value={formData.poNumber}
                                    onChange={handleChange}
                                    className="w-full px-4 py-3 rounded-lg bg-white/10 border border-white/20 text-white focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent transition-all"
                                    required
                                >
                                    {Object.keys(PURCHASE_ORDERS).map(po => (
                                        <option key={po} value={po} className="text-gray-800">
                                            {po} - {PURCHASE_ORDERS[po].items}
                                        </option>
                                    ))}
                                </select>
                            </div>
                            <div>
                                <label className="block text-sm font-medium mb-2">Amount</label>
                                <input
                                    type="number"
                                    name="amount"
                                    value={formData.amount}
                                    onChange={handleChange}
                                    className="w-full px-4 py-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent transition-all"
                                    required
                                />
                            </div>
                        </div>

                        <div>
                            <label className="block text-sm font-medium mb-2">Due Date</label>
                            <input
                                type="date"
                                name="dueDate"
                                value={formData.dueDate}
                                onChange={handleChange}
                                className="w-full px-4 py-3 rounded-lg bg-white/10 border border-white/20 text-white focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent transition-all"
                                required
                            />
                        </div>

                        {uploadProgress > 0 && uploadProgress < 100 && (
                            <div className="mb-4">
                                <div className="flex justify-between text-sm mb-1">
                                    <span>Processing OCR...</span>
                                    <span>{uploadProgress}%</span>
                                </div>
                                <div className="w-full bg-white/20 rounded-full h-2">
                                    <div 
                                        className="bg-gradient-to-r from-purple-400 to-pink-400 h-2 rounded-full progress-bar"
                                        style={{ width: `${uploadProgress}%` }}
                                    ></div>
                                </div>
                            </div>
                        )}

                        <button
                            type="submit"
                            disabled={isProcessing}
                            className="w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-4 px-6 rounded-lg transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2"
                        >
                            {isProcessing ? (
                                <>
                                    <div className="loading-spinner"></div>
                                    <span>Processing...</span>
                                </>
                            ) : (
                                <>
                                    <span>üîç</span>
                                    <span>Extract Invoice Data</span>
                                </>
                            )}
                        </button>
                    </form>
                </div>
            );
        }

        function ValidationScreen({ invoice, onValidate, isValidating, validationResult, completedSteps }) {
            const [validationSteps, setValidationSteps] = useState([]);

            useEffect(() => {
                if (isValidating) {
                    const steps = [
                        'Checking vendor registration...',
                        'Validating PO number...',
                        'Verifying amount matching...',
                        'Scanning for duplicates...',
                        'Cross-referencing databases...'
                    ];
                    
                    let currentStep = 0;
                    setValidationSteps([]);
                    
                    const interval = setInterval(() => {
                        if (currentStep < steps.length) {
                            setValidationSteps(prev => [...prev, { text: steps[currentStep], status: 'processing' }]);
                            
                            setTimeout(() => {
                                setValidationSteps(prev => prev.map((step, index) => 
                                    index === currentStep ? { ...step, status: 'complete' } : step
                                ));
                            }, 400);
                            
                            currentStep++;
                        } else {
                            clearInterval(interval);
                        }
                    }, 600);

                    return () => clearInterval(interval);
                }
            }, [isValidating]);

            return (
                <div className="glass-effect rounded-2xl p-8 shadow-2xl slide-in">
                    <div className="flex items-center justify-between mb-6">
                        <h2 className="text-3xl font-bold">‚úÖ Validation Engine</h2>
                        {completedSteps.includes('validation') && (
                            <div className="success-bounce bg-green-500 rounded-full p-2">
                                <span className="text-white font-bold">‚úì</span>
                            </div>
                        )}
                    </div>

                    {/* Validation Illustration */}
                    <div className="text-center mb-8">
                        <img 
                            src="validate.webp" 
                            alt="Advanced validation system interface showing multiple verification checks with green checkmarks for passed validations and detailed scanning process visualization in a high-tech blue theme"
                            className="mx-auto rounded-xl shadow-lg mb-4 w-16"
                        />
                    </div>

                    {/* Invoice Summary */}
                    {invoice && (
                        <div className="glass-effect rounded-xl p-6 mb-6">
                            <h3 className="text-xl font-semibold mb-4">Invoice Summary</h3>
                            <div className="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                                <div>
                                    <div className="opacity-75">Invoice #</div>
                                    <div className="font-semibold">{invoice.invoiceNumber}</div>
                                </div>
                                <div>
                                    <div className="opacity-75">Vendor</div>
                                    <div className="font-semibold">{invoice.vendor}</div>
                                </div>
                                <div>
                                    <div className="opacity-75">Amount</div>
                                    <div className="font-semibold">{formatCurrency(invoice.amount)}</div>
                                </div>
                                <div>
                                    <div className="opacity-75">PO Number</div>
                                    <div className="font-semibold">{invoice.poNumber}</div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Validation Steps */}
                    {validationSteps.length > 0 && (
                        <div className="mb-6">
                            <h4 className="font-semibold mb-3">Validation Progress</h4>
                            <div className="space-y-2">
                                {validationSteps.map((step, index) => (
                                    <div key={index} className="flex items-center space-x-3">
                                        {step.status === 'processing' ? (
                                            <div className="loading-spinner w-4 h-4"></div>
                                        ) : (
                                            <div className="w-4 h-4 bg-green-500 rounded-full flex items-center justify-center">
                                                <span className="text-xs text-white">‚úì</span>
                                            </div>
                                        )}
                                        <span className={step.status === 'complete' ? 'opacity-75' : ''}>{step.text}</span>
                                    </div>
                                ))}
                            </div>
                        </div>
                    )}

                    {/* Validation Result */}
                    {validationResult && (
                        <div className={`glass-effect rounded-lg p-4 mb-6 border-l-4 ${
                            validationResult.success 
                                ? 'border-green-400 bg-green-400/10' 
                                : 'border-red-400 bg-red-400/10'
                        }`}>
                            <div className="flex items-center space-x-2">
                                <span className="text-xl">
                                    {validationResult.success ? '‚úÖ' : '‚ùå'}
                                </span>
                                <div>
                                    <div className="font-semibold">
                                        {validationResult.success ? 'Validation Successful' : 'Validation Failed'}
                                    </div>
                                    <div className="text-sm opacity-75">{validationResult.message}</div>
                                </div>
                            </div>
                        </div>
                    )}

                    <button
                        onClick={onValidate}
                        disabled={!invoice || isValidating}
                        className="w-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-bold py-4 px-6 rounded-lg transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2"
                    >
                        {isValidating ? (
                            <>
                                <div className="loading-spinner"></div>
                                <span>Validating...</span>
                            </>
                        ) : (
                            <>
                                <span>üîç</span>
                                <span>Start Validation</span>
                            </>
                        )}
                    </button>
                </div>
            );
        }

        function ApprovalWorkflow({ invoice, onApprove, onReject, isProcessing, approvalResult, completedSteps }) {
            const [showApprovalForm, setShowApprovalForm] = useState(false);

            useEffect(() => {
                if (invoice && invoice.validated) {
                    setTimeout(() => setShowApprovalForm(true), 500);
                }
            }, [invoice]);

            return (
                <div className="glass-effect rounded-2xl p-8 shadow-2xl slide-in">
                    <div className="flex items-center justify-between mb-6">
                        <h2 className="text-3xl font-bold">üë®‚Äçüíº Approval Workflow</h2>
                        {completedSteps.includes('approval') && (
                            <div className="success-bounce bg-green-500 rounded-full p-2">
                                <span className="text-white font-bold">‚úì</span>
                            </div>
                        )}
                    </div>

                    {/* Approval Process Illustration */}
                    <div className="text-center mb-8">
                        <img 
                            src="approved.jpg" 
                            alt="Professional approval workflow interface showing manager dashboard with notification system, approval buttons, and digital signature capture in a corporate blue-gray color scheme"
                            className="mx-auto rounded-xl shadow-lg mb-4 w-16"
                        />
                    </div>

                    {invoice && invoice.validated ? (
                        <>
                            {/* Approval Request Card */}
                            <div className="glass-effect rounded-xl p-6 mb-6 notification-enter">
                                <div className="flex items-start space-x-4">
                                    <div className="w-12 h-12 bg-yellow-500 rounded-full flex items-center justify-center">
                                        <span className="text-xl">üîî</span>
                                    </div>
                                    <div className="flex-1">
                                        <h3 className="text-lg font-semibold mb-2">Approval Required</h3>
                                        <p className="opacity-75 mb-4">
                                            Invoice {invoice.invoiceNumber} from {invoice.vendor} requires manager approval.
                                        </p>
                                        
                                        {/* Invoice Details Table */}
                                        <div className="glass-effect rounded-lg p-4 mb-4">
                                            <div className="grid grid-cols-2 gap-4 text-sm">
                                                <div>
                                                    <span className="opacity-75">Amount:</span>
                                                    <span className="ml-2 font-semibold text-green-300">
                                                        {formatCurrency(invoice.amount)}
                                                    </span>
                                                </div>
                                                <div>
                                                    <span className="opacity-75">Due Date:</span>
                                                    <span className="ml-2 font-semibold">
                                                        {formatDate(invoice.dueDate)}
                                                    </span>
                                                </div>
                                                <div>
                                                    <span className="opacity-75">PO Number:</span>
                                                    <span className="ml-2 font-semibold">{invoice.poNumber}</span>
                                                </div>
                                                <div>
                                                    <span className="opacity-75">Vendor:</span>
                                                    <span className="ml-2 font-semibold">{invoice.vendor}</span>
                                                </div>
                                            </div>
                                        </div>

                                        {/* Approval Buttons */}
                                        {showApprovalForm && !approvalResult && (
                                            <div className="flex space-x-4">
                                                <button
                                                    onClick={onApprove}
                                                    disabled={isProcessing}
                                                    className="flex-1 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-105 disabled:opacity-50 flex items-center justify-center space-x-2"
                                                >
                                                    {isProcessing ? (
                                                        <>
                                                            <div className="loading-spinner"></div>
                                                            <span>Processing...</span>
                                                        </>
                                                    ) : (
                                                        <>
                                                            <span>‚úÖ</span>
                                                            <span>Approve</span>
                                                        </>
                                                    )}
                                                </button>
                                                <button
                                                    onClick={onReject}
                                                    disabled={isProcessing}
                                                    className="flex-1 bg-gradient-to-r from-red-500 to-rose-500 hover:from-red-600 hover:to-rose-600 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-105 disabled:opacity-50 flex items-center justify-center space-x-2"
                                                >
                                                    <span>‚ùå</span>
                                                    <span>Reject</span>
                                                </button>
                                            </div>
                                        )}

                                        {/* Approval Result */}
                                        {approvalResult && (
                                            <div className={`glass-effect rounded-lg p-4 border-l-4 ${
                                                approvalResult.approved 
                                                    ? 'border-green-400 bg-green-400/10' 
                                                    : 'border-red-400 bg-red-400/10'
                                            }`}>
                                                <div className="flex items-center space-x-2">
                                                    <span className="text-xl">
                                                        {approvalResult.approved ? '‚úÖ' : '‚ùå'}
                                                    </span>
                                                    <div>
                                                        <div className="font-semibold">
                                                            {approvalResult.approved ? 'Invoice Approved' : 'Invoice Rejected'}
                                                        </div>
                                                        <div className="text-sm opacity-75">
                                                            {approvalResult.message}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        )}
                                    </div>
                                </div>
                            </div>
                        </>
                    ) : (
                        <div className="text-center py-12 opacity-75">
                            <div className="text-6xl mb-4">‚è≥</div>
                            <p className="text-lg">Waiting for validated invoice...</p>
                            <p className="text-sm">Complete the validation step first to proceed with approval.</p>
                        </div>
                    )}
                </div>
            );
        }

        function Dashboard({ invoices, stats }) {
            const [filter, setFilter] = useState('all');
            const [sortBy, setSortBy] = useState('date');

            const filteredInvoices = invoices.filter(invoice => {
                if (filter === 'all') return true;
                return invoice.status?.toLowerCase() === filter;
            });

            const sortedInvoices = [...filteredInvoices].sort((a, b) => {
                switch (sortBy) {
                    case 'amount':
                        return b.amount - a.amount;
                    case 'vendor':
                        return a.vendor.localeCompare(b.vendor);
                    default:
                        return new Date(b.dueDate) - new Date(a.dueDate);
                }
            });

            const getStatusColor = (status) => {
                switch (status?.toLowerCase()) {
                    case 'paid': return 'bg-green-500';
                    case 'approved': return 'bg-blue-500';
                    case 'pending': return 'bg-yellow-500';
                    case 'rejected': return 'bg-red-500';
                    default: return 'bg-gray-500';
                }
            };

            const getStatusIcon = (status) => {
                switch (status?.toLowerCase()) {
                    case 'paid': return 'üí∞';
                    case 'approved': return '‚úÖ';
                    case 'pending': return '‚è≥';
                    case 'rejected': return '‚ùå';
                    default: return 'üìÑ';
                }
            };

            return (
                <div className="glass-effect rounded-2xl p-8 shadow-2xl slide-in">
                    <div className="flex items-center justify-between mb-6">
                        <h2 className="text-3xl font-bold">üìä Invoice Dashboard</h2>
                        <div className="flex items-center space-x-4">
                            <select
                                value={filter}
                                onChange={(e) => setFilter(e.target.value)}
                                className="px-3 py-2 bg-white/10 rounded-lg border border-white/20 text-white text-sm focus:outline-none focus:ring-2 focus:ring-purple-400"
                            >
                                <option value="all" className="text-gray-800">All Status</option>
                                <option value="pending" className="text-gray-800">Pending</option>
                                <option value="approved" className="text-gray-800">Approved</option>
                                <option value="paid" className="text-gray-800">Paid</option>
                                <option value="rejected" className="text-gray-800">Rejected</option>
                            </select>
                            <select
                                value={sortBy}
                                onChange={(e) => setSortBy(e.target.value)}
                                className="px-3 py-2 bg-white/10 rounded-lg border border-white/20 text-white text-sm focus:outline-none focus:ring-2 focus:ring-purple-400"
                            >
                                <option value="date" className="text-gray-800">Sort by Date</option>
                                <option value="amount" className="text-gray-800">Sort by Amount</option>
                                <option value="vendor" className="text-gray-800">Sort by Vendor</option>
                            </select>
                        </div>
                    </div>

                    {/* Analytics Cards */}
                    <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
                        <div className="glass-effect rounded-lg p-4 text-center">
                            <div className="text-2xl mb-2">üìà</div>
                            <div className="text-2xl font-bold text-green-300">{stats.processed}</div>
                            <div className="text-sm opacity-75">Total Processed</div>
                        </div>
                        <div className="glass-effect rounded-lg p-4 text-center">
                            <div className="text-2xl mb-2">‚è≥</div>
                            <div className="text-2xl font-bold text-yellow-300">{stats.pending}</div>
                            <div className="text-sm opacity-75">Pending Review</div>
                        </div>
                        <div className="glass-effect rounded-lg p-4 text-center">
                            <div className="text-2xl mb-2">‚úÖ</div>
                            <div className="text-2xl font-bold text-blue-300">{stats.approved}</div>
                            <div className="text-sm opacity-75">Approved</div>
                        </div>
                        <div className="glass-effect rounded-lg p-4 text-center">
                            <div className="text-2xl mb-2">üí∞</div>
                            <div className="text-2xl font-bold text-purple-300">{formatCurrency(stats.totalValue)}</div>
                            <div className="text-sm opacity-75">Total Value</div>
                        </div>
                    </div>

                    {/* Invoices Table */}
                    <div className="glass-effect rounded-xl overflow-hidden">
                        <div className="overflow-x-auto">
                            <table className="w-full">
                                <thead>
                                    <tr className="bg-white/10">
                                        <th className="px-6 py-4 text-left font-semibold">Invoice</th>
                                        <th className="px-6 py-4 text-left font-semibold">Vendor</th>
                                        <th className="px-6 py-4 text-left font-semibold">Amount</th>
                                        <th className="px-6 py-4 text-left font-semibold">Due Date</th>
                                        <th className="px-6 py-4 text-left font-semibold">Status</th>
                                        <th className="px-6 py-4 text-left font-semibold">Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {sortedInvoices.length > 0 ? sortedInvoices.map((invoice, index) => (
                                        <tr key={index} className="border-t border-white/10 hover:bg-white/5 transition-colors">
                                            <td className="px-6 py-4">
                                                <div className="flex items-center space-x-3">
                                                    <span className="text-lg">{getStatusIcon(invoice.status)}</span>
                                                    <div>
                                                        <div className="font-semibold">{invoice.invoiceNumber}</div>
                                                        <div className="text-sm opacity-75">{invoice.poNumber}</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td className="px-6 py-4">
                                                <div className="font-medium">{invoice.vendor}</div>
                                            </td>
                                            <td className="px-6 py-4">
                                                <div className="font-bold text-green-300">
                                                    {formatCurrency(invoice.amount)}
                                                </div>
                                            </td>
                                            <td className="px-6 py-4">
                                                <div className="text-sm">{formatDate(invoice.dueDate)}</div>
                                            </td>
                                            <td className="px-6 py-4">
                                                <span className={`status-badge px-3 py-1 rounded-full text-xs font-semibold ${getStatusColor(invoice.status)} text-white`}>
                                                    {(invoice.status || 'Pending').toUpperCase()}
                                                </span>
                                            </td>
                                            <td className="px-6 py-4">
                                                <button className="text-purple-300 hover:text-purple-100 text-sm font-medium">
                                                    View Details
                                                </button>
                                            </td>
                                        </tr>
                                    )) : (
                                        <tr>
                                            <td colSpan="6" className="px-6 py-12 text-center">
                                                <div className="text-6xl mb-4 opacity-50">üìÑ</div>
                                                <div className="text-lg opacity-75">No invoices found</div>
                                                <div className="text-sm opacity-50">Start by uploading an invoice</div>
                                            </td>
                                        </tr>
                                    )}
                                </tbody>
                            </table>
                        </div>
                    </div>

                    {/* Payment Notification */}
                    {stats.processed > 0 && (
                        <div className="mt-6 glass-effect rounded-lg p-4 border-l-4 border-green-400 bg-green-400/10">
                            <div className="flex items-center space-x-3">
                                <img 
                                    src="payment.webp" 
                                    alt="Success notification icon showing completed payment processing with checkmark and envelope symbols in green color theme"
                                    className="rounded-lg w-16"
                                />
                                <div>
                                    <div className="font-semibold text-green-300">Payment Processing Complete</div>
                                    <div className="text-sm opacity-75">
                                        Automated payment scheduled and vendor notifications sent successfully.
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        // Main Application Component
        function InvoiceAutomationApp() {
            const [activeTab, setActiveTab] = useState('upload');
            const [currentInvoice, setCurrentInvoice] = useState(null);
            const [invoices, setInvoices] = useState(loadInvoices());
            const [completedSteps, setCompletedSteps] = useState([]);
            
            // Processing states
            const [isUploading, setIsUploading] = useState(false);
            const [isValidating, setIsValidating] = useState(false);
            const [isProcessingApproval, setIsProcessingApproval] = useState(false);
            
            // Results states
            const [validationResult, setValidationResult] = useState(null);
            const [approvalResult, setApprovalResult] = useState(null);

            // Calculate statistics
            const stats = {
                processed: invoices.length,
                pending: invoices.filter(inv => inv.status === 'pending').length,
                approved: invoices.filter(inv => inv.status === 'approved' || inv.status === 'paid').length,
                totalValue: invoices.reduce((sum, inv) => sum + inv.amount, 0)
            };

            const handleInvoiceUpload = async (formData) => {
                setIsUploading(true);
                
                // Simulate OCR processing
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                setCurrentInvoice({
                    ...formData,
                    id: generateId(),
                    status: 'pending',
                    uploadedAt: new Date().toISOString()
                });
                
                setCompletedSteps(prev => [...prev, 'upload']);
                setIsUploading(false);
                
                // Auto-switch to validation tab
                setTimeout(() => setActiveTab('validation'), 500);
            };

            const handleValidation = async () => {
                if (!currentInvoice) return;
                
                setIsValidating(true);
                setValidationResult(null);
                
                // Simulate validation process
                await new Promise(resolve => setTimeout(resolve, 3000));
                
                // Validation logic
                const vendorExists = VENDORS.find(v => v.name === currentInvoice.vendor);
                const poExists = PURCHASE_ORDERS[currentInvoice.poNumber];
                const poMatches = poExists && poExists.vendor === currentInvoice.vendor && Math.abs(poExists.amount - currentInvoice.amount) < 0.01;
                const noDuplicate = !invoices.find(inv => inv.invoiceNumber === currentInvoice.invoiceNumber);
                
                const isValid = vendorExists && poMatches && noDuplicate;
                
                if (isValid) {
                    setValidationResult({
                        success: true,
                        message: 'All validation checks passed. Invoice is ready for approval.'
                    });
                    setCurrentInvoice(prev => ({ ...prev, validated: true }));
                    setCompletedSteps(prev => [...prev, 'validation']);
                    
                    // Auto-switch to approval tab
                    setTimeout(() => setActiveTab('approval'), 1000);
                } else {
                    let errorMessage = 'Validation failed: ';
                    if (!vendorExists) errorMessage += 'Vendor not registered. ';
                    if (!poMatches) errorMessage += 'PO number, vendor, or amount mismatch. ';
                    if (!noDuplicate) errorMessage += 'Duplicate invoice number. ';
                    
                    setValidationResult({
                        success: false,
                        message: errorMessage
                    });
                }
                
                setIsValidating(false);
            };

            const handleApprove = async () => {
                setIsProcessingApproval(true);
                
                // Simulate approval process
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                const approvedInvoice = {
                    ...currentInvoice,
                    status: 'paid',
                    approvedAt: new Date().toISOString(),
                    paymentScheduled: true
                };
                
                const updatedInvoices = [...invoices, approvedInvoice];
                setInvoices(updatedInvoices);
                saveInvoices(updatedInvoices);
                
                setApprovalResult({
                    approved: true,
                    message: 'Invoice approved and payment has been scheduled. Vendor notification sent.'
                });
                
                setCompletedSteps(prev => [...prev, 'approval']);
                setIsProcessingApproval(false);
                
                // Auto-switch to dashboard
                setTimeout(() => setActiveTab('dashboard'), 1500);
            };

            const handleReject = () => {
                setApprovalResult({
                    approved: false,
                    message: 'Invoice rejected. Process terminated.'
                });
            };

            const renderTabContent = () => {
                switch (activeTab) {
                    case 'upload':
                        return (
                            <InvoiceUploadForm
                                onSubmit={handleInvoiceUpload}
                                isProcessing={isUploading}
                                completedSteps={completedSteps}
                            />
                        );
                    case 'validation':
                        return (
                            <ValidationScreen
                                invoice={currentInvoice}
                                onValidate={handleValidation}
                                isValidating={isValidating}
                                validationResult={validationResult}
                                completedSteps={completedSteps}
                            />
                        );
                    case 'approval':
                        return (
                            <ApprovalWorkflow
                                invoice={currentInvoice}
                                onApprove={handleApprove}
                                onReject={handleReject}
                                isProcessing={isProcessingApproval}
                                approvalResult={approvalResult}
                                completedSteps={completedSteps}
                            />
                        );
                    case 'dashboard':
                        return <Dashboard invoices={invoices} stats={stats} />;
                    default:
                        return null;
                }
            };

            return (
                <div className="container mx-auto px-4 py-8 max-w-7xl">
                    <Header stats={stats} />
                    <NavigationTabs 
                        activeTab={activeTab} 
                        setActiveTab={setActiveTab}
                        completedSteps={completedSteps}
                    />
                    {renderTabContent()}
                </div>
            );
        }

        // Render the application
        ReactDOM.render(<InvoiceAutomationApp />, document.getElementById('root'));
    </script>
</body>
</html>
